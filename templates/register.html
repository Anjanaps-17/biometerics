<!DOCTYPE html>
<html>
<head>
    <title>Register</title>
    <style>
        body { 
            background: linear-gradient(to right, #a8cfff 0%, #4facfe 100%); 
            font-family: Arial; 
            color: white; 
            text-align: center; 
            padding: 50px;
        }
        form { 
            background: rgba(255,255,255,0.2); 
            padding: 30px; 
            border-radius: 10px; 
            display: inline-block; 
        }
        input { 
            padding: 10px; 
            margin: 5px; 
            border: none; 
            border-radius: 5px; 
            width: 250px; 
        }
        input[type=submit] { 
            background: #2196F3; 
            color: white; 
            cursor: pointer; 
            width: 100px; 
        }
        h2 { 
            margin-bottom: 20px; 
        }
        a { 
            color: #fff; 
        }
        #password-strength { 
            margin-top: 10px; 
            font-size: 14px; 
            min-height: 20px;
            color: #ffeb3b;
            font-weight: bold;
        }
        .strength-weak { 
            color: #ff4444; 
        }
        .strength-medium { 
            color: #ffaa00; 
        }
        .strength-strong { 
            color: #00ff88; 
        }
        .requirements { 
            text-align: left; 
            font-size: 12px; 
            margin-top: 5px;
            background: rgba(0,0,0,0.2); 
            padding: 10px; 
            border-radius: 5px;
            font-weight: bold;
        }
        .requirement { 
            margin: 2px 0; 
        }
        .met { 
            color: #00ff88; 
        }
        .not-met { 
            color: #ff4444; 
        }
        /* password + eye wrapper */
        .password-wrapper {
            display: inline-flex;
            align-items: center;
            background: rgba(0,0,0,0.2);
            border-radius: 5px;
            padding-right: 5px;
            width: 250px;
        }
        .password-wrapper input {
            margin: 0;
            border-radius: 5px 0 0 5px;
            width: 210px;
        }
        .toggle-eye {
            cursor: pointer;
            padding: 0 8px;
            user-select: none;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h2>Register New User</h2>
    <form method="post" onsubmit="return validateForm()">
        Username: <input type="text" name="username" required><br>
        Email: <input type="email" name="email" required><br>
        Password: 
        <div class="password-wrapper">
            <input type="password" name="password" id="password" required>
            <span class="toggle-eye" id="togglePassword">üëÅ</span>
        </div>
        <br>
        
        <div id="password-strength">Enter your password</div>
        <div class="requirements" id="requirements">
            <div class="requirement not-met" id="length">‚Ä¢ At least 8 characters</div>
            <div class="requirement not-met" id="uppercase">‚Ä¢ At least 1 uppercase letter (A-Z)</div>
            <div class="requirement not-met" id="lowercase">‚Ä¢ At least 1 lowercase letter (a-z)</div>
            <div class="requirement not-met" id="number">‚Ä¢ At least 1 number (0-9)</div>
            <div class="requirement not-met" id="special">‚Ä¢ At least 1 special character (!@#$%^&*)</div>
        </div>
        
        <input type="submit" value="Register" id="submit-btn" disabled>
    </form>
    <p>Already have an account? <a href="/">Login</a></p>

    <script>
        const passwordInput = document.getElementById('password');
        const submitBtn = document.getElementById('submit-btn');
        const strengthDiv = document.getElementById('password-strength');
        const togglePassword = document.getElementById('togglePassword');

        // Eye toggle
        togglePassword.addEventListener('click', function () {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            this.textContent = type === 'password' ? 'üëÅ' : 'üôà';
        });

        // Strength + requirements
        passwordInput.addEventListener('input', function() {
            const password = this.value;
            updateStrength(password);
            updateRequirements(password);
            toggleSubmitButton();
        });

        function updateStrength(password) {
            let strength = 0;
            if (password.length >= 8) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[a-z]/.test(password)) strength++;
            if (/\d/.test(password)) strength++;
            if (/[!@#$%^&*(),.?":{}|<>]/.test(password)) strength++;

            strengthDiv.textContent = getStrengthText(strength);
            strengthDiv.className = `strength-${getStrengthClass(strength)}`;
        }

        function getStrengthText(strength) {
            const texts = [
                'Too weak',
                'Weak', 
                'Fair',
                'Good',
                'Strong'
            ];
            return texts[strength] || 'Enter your password';
        }

        function getStrengthClass(strength) {
            if (strength >= 4) return 'strong';
            if (strength >= 3) return 'medium';
            if (strength >= 2) return 'medium';
            return 'weak';
        }

        function updateRequirements(password) {
            document.getElementById('length').className = 
                password.length >= 8 ? 'requirement met' : 'requirement not-met';
            document.getElementById('uppercase').className = 
                /[A-Z]/.test(password) ? 'requirement met' : 'requirement not-met';
            document.getElementById('lowercase').className = 
                /[a-z]/.test(password) ? 'requirement met' : 'requirement not-met';
            document.getElementById('number').className = 
                /\d/.test(password) ? 'requirement met' : 'requirement not-met';
            document.getElementById('special').className = 
                /[!@#$%^&*(),.?":{}|<>]/.test(password) ? 'requirement met' : 'requirement not-met';
        }

        function toggleSubmitButton() {
            const password = passwordInput.value;
            const isStrong = password.length >= 8 && 
                           /[A-Z]/.test(password) &&
                           /[a-z]/.test(password) &&
                           /\d/.test(password) &&
                           /[!@#$%^&*(),.?":{}|<>]/.test(password);
            
            submitBtn.disabled = !isStrong;
            submitBtn.style.opacity = isStrong ? '1' : '0.5';
        }

        function validateForm() {
            const password = passwordInput.value;
            const isStrong = password.length >= 8 && 
                           /[A-Z]/.test(password) &&
                           /[a-z]/.test(password) &&
                           /\d/.test(password) &&
                           /[!@#$%^&*(),.?":{}|<>]/.test(password);
            
            if (!isStrong) {
                alert('Please use a stronger password that meets all requirements.');
                return false;
            }
            return true;
        }
    </script>
</body>
</html>
